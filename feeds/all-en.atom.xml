<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>vBlog</title><link href="http://vladvasiliu.com/" rel="alternate"></link><link href="http://vladvasiliu.com/feeds/all-en.atom.xml" rel="self"></link><id>http://vladvasiliu.com/</id><updated>2013-01-22T13:29:00+01:00</updated><entry><title>Setting default NFSv4 ACLs on FreeBSD</title><link href="http://vladvasiliu.com/default-nfsv4-acls-freebsd.html" rel="alternate"></link><updated>2013-01-22T13:29:00+01:00</updated><author><name>Vlad Vasiliu</name></author><id>tag:vladvasiliu.com,2013-01-22:default-nfsv4-acls-freebsd.html</id><summary type="html">&lt;p&gt;On FreeBSD with &lt;span class="caps"&gt;ZFS&lt;/span&gt;, only NFSv4 ACLs are supported. At the time of this writing, the &lt;a href="https://wiki.freebsd.org/NFSv4_ACLs"&gt;FreeBSD documentation regarding ACLs&lt;/a&gt; is a bit vague. Specifically, it doesn&amp;#8217;t talk about inheritable&amp;nbsp;attributes.&lt;/p&gt;
&lt;p&gt;The &lt;code&gt;-d&lt;/code&gt; argument, used to define default &lt;span class="caps"&gt;POSIX&lt;/span&gt; ACLs is not supported. Instead, there are some flags one can set in order to define how ACLs are inherited. For an explanation, look in the manual for &lt;code&gt;setfacl&lt;/code&gt;, section &lt;em&gt;&lt;span class="caps"&gt;ACL&lt;/span&gt; inheritance flags&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Let&amp;#8217;s say you want all the files and directories inside &lt;code&gt;somedir&lt;/code&gt; to be readable by the users in the group &lt;code&gt;somegroup&lt;/code&gt;. You would do the&amp;nbsp;folling:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;setfacl -m g:somegroup:rx:fd:allow somedir
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;This sets &lt;code&gt;somedir&lt;/code&gt; to be readable and executable by &lt;code&gt;somegroup&lt;/code&gt; and those properties will be inherited by all new files (the &lt;code&gt;f&lt;/code&gt; flag) and directories (&lt;code&gt;d&lt;/code&gt; flag).&lt;/p&gt;
&lt;p&gt;Do note, however, that this only applies to newly created files. In the FreeBSD implementation of &lt;code&gt;setfacl&lt;/code&gt; there is no recursive option. One way of applying the changes to the subtree&amp;nbsp;is:&lt;/p&gt;
&lt;div class="codehilite"&gt;&lt;pre&gt;find . -type d -exec setfacl -m g:somegroup:rx:fd:allow &lt;span class="o"&gt;{}&lt;/span&gt; &lt;span class="se"&gt;\;&lt;/span&gt;
find . -type f -exec setfacl -m g:somegroup:r::allow &lt;span class="o"&gt;{}&lt;/span&gt; &lt;span class="se"&gt;\;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The first line sets the previous ACLs on all the subdirectories, while the second sets the &lt;span class="caps"&gt;ACL&lt;/span&gt; on all the&amp;nbsp;files.&lt;/p&gt;
&lt;p&gt;In order for this to work, some &lt;span class="caps"&gt;ZFS&lt;/span&gt; attributes must be set &lt;code&gt;aclinherit=passthrough-x&lt;/code&gt; and &lt;code&gt;aclmode=passthrough&lt;/code&gt;. See &lt;a href="http://docs.oracle.com/cd/E19082-01/817-2271/gbaaz/index.html" title="ACL Property Modes"&gt;here&lt;/a&gt; for the &lt;span class="caps"&gt;ZFS&lt;/span&gt; properties&amp;nbsp;documentation.&lt;/p&gt;</summary><category term="freebsd"></category><category term="zfs"></category><category term="acl"></category><category term="nfsv4"></category><category term="sysadmin"></category></entry><entry><title>MySQL Replication - I/O Error Code 1045</title><link href="http://vladvasiliu.com/mysql-replication-error-1045.html" rel="alternate"></link><updated>2013-01-21T14:10:00+01:00</updated><author><name>Vlad Vasiliu</name></author><id>tag:vladvasiliu.com,2013-01-21:mysql-replication-error-1045.html</id><summary type="html">&lt;p&gt;Setting up replication on MySQL may yield the following&amp;nbsp;error:&lt;/p&gt;
&lt;blockquote&gt;
[&lt;span class="caps"&gt;ERROR&lt;/span&gt;] Slave I/O: error connecting to master, Error code 1045&lt;/blockquote&gt;
&lt;p&gt;The MySQL &lt;a class="reference external" href="http://dev.mysql.com/doc/refman/5.5/en/replication-problems.html"&gt;troubleshooting page&lt;/a&gt;  gives a few hints, talking about credentials for the replication user. However, attempting a connection via the command lient client works, so the password is &lt;span class="caps"&gt;OK&lt;/span&gt; and the slave can reach the master. As it turns out, for replication purposes, the maximum password length is 32&amp;nbsp;characters.&lt;/p&gt;
</summary><category term="replication"></category><category term="mysql"></category></entry><entry><title>Hello world!</title><link href="http://vladvasiliu.com/hello-world.html" rel="alternate"></link><updated>2013-01-21T13:20:00+01:00</updated><author><name>Vlad Vasiliu</name></author><id>tag:vladvasiliu.com,2013-01-21:hello-world.html</id><summary type="html">&lt;p&gt;This is the first post of this blog. It is a static site generated by &lt;a class="reference external" href="http://blog.getpelican.com/category/news.html"&gt;Pelican&lt;/a&gt; and is hosted on &lt;a class="reference external" href="http://pages.github.com"&gt;GitHub Pages&lt;/a&gt;.&lt;/p&gt;
</summary></entry></feed>